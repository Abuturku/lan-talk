<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:composition template="/templates/basic.xhtml">
		<ui:define name="container">
			<p:layout>
			    <p:layoutUnit id="west" position="west" resizable="true" size="20%" minSize="40" maxSize="1000">
					<a href="./../pages/lan-talk.xhtml">
						<img id="logo" alt="Lan-Talk Logo" src="./../img/logo_lan_talk.png"/>
					</a>
					<h:form>
					    <p:growl autoUpdate="true"/>
					 
					    <p:panelMenu id="menu">
					        <p:submenu label="#{msgs['loginInfo']} #{userManagerBean.getUserName()}">
					            <p:menuitem class="nonclickable" value="#{msgs['role']}: #{userManagerBean.getUserRole()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['rank']}: #{userManagerBean.getUserRank()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['memberSince']} #{userManagerBean.getUserRegTime()}"/>
					            <p:menuitem class="nonclickable" value="Talks: #{userManagerBean.getAmountOfPosts()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['comments']}: #{userManagerBean.getAmountOfComments()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['votes']}: #{userManagerBean.getAmountOfVotes()}"/>
					            <p:menuitem value="#{msgs['logout']}" action="#{userManagerBean.logout()}" ajax="false"/>
					        </p:submenu>
					    </p:panelMenu>
					    
					    <p:commandButton rendered="#{userManagerBean.isUserInRole('Moderator')}" action="./reports.xhtml?faces-redirect=true" value="Show reports"/>
					
						<p:selectOneMenu value="#{postManagerBean.sortBy}" style="width:150px">
			                <p:ajax listener="#{postManagerBean.sortAllPosts()}"/>
			                <f:selectItems value="#{postManagerBean.sortMethods}" />
			            </p:selectOneMenu>
						<p:selectOneButton value="#{postManagerBean.showAll}">
							<p:ajax listener="#{postManagerBean.sortAllPosts()}"/>
				            <f:selectItem itemLabel="All Talks" itemValue="1" />
				            <f:selectItem itemLabel="My Talks" itemValue="0" />
				        </p:selectOneButton>
				        
					</h:form>

			    </p:layoutUnit>
			    <p:layoutUnit id="center" position="center">
				    <div id="lt-main-content"> 
						<ui:insert name="lt-main-content"></ui:insert>
					</div>
			    </p:layoutUnit>
			</p:layout>
		</ui:define>
	</ui:composition>
</html>