<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:composition template="/templates/basic.xhtml">
		<ui:define name="container">
		
		<p>Login was successful as user #{securityBean.loginName} (#{securityBean.user.name})</p>
			<p:layout>
			    <p:layoutUnit id="west" position="west" resizable="true" size="35%" minSize="40" maxSize="1000">
					<img id="logo" alt="Lan-Talk Logo" src="./img/logo_lan_talk.png"/>
					
					<h:form>
					    <p:growl autoUpdate="true"/>
					 
					    <p:panelMenu id="menu">
					        <p:submenu label="#{msgs['loginInfo']} #{userManagerBean.getUserName()}">
					            <p:menuitem class="nonclickable" value="#{msgs['role']}: #{userManagerBean.getUserRole()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['rank']}: #{userManagerBean.getUserRank()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['memberSince']} #{userManagerBean.getUserRegTime()}"/>
					            <p:menuitem class="nonclickable" value="Talks: #{userManagerBean.getAmountOfPosts()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['comments']}: #{userManagerBean.getAmountOfComments()}"/>
					            <p:menuitem class="nonclickable" value="#{msgs['votes']}: #{userManagerBean.getAmountOfVotes()}"/>
					            <p:menuitem value="#{msgs['logout']}"/>
					        </p:submenu>
					        <p:submenu label="#{msgs['Reports']}" class="modOnly">
					        	<p:menuitem value="#{msgs['user']} #{msgs['reports']}" class="adminOnly"/>
					        	<p:menuitem value="Talk #{msgs['reports']}" class="modOnly"/>
					        	<p:menuitem value="#{msgs['comment']} #{msgs['reports']}" class="modOnly"/>
					        </p:submenu>
					        
					    </p:panelMenu>
					
						<p:selectOneMenu value="#{postManagerBean.sortBy}" style="width:150px">
			                <p:ajax listener="#{postManagerBean.onSortByChange}"/>
			                <f:selectItems value="#{postManagerBean.sortMethods}" />
			            </p:selectOneMenu>
						<p:selectOneButton value="#{postManagerBean.showAll}">
				            <f:selectItem itemLabel="All Talks" itemValue="1" />
				            <f:selectItem itemLabel="My Talks" itemValue="0" />
				        </p:selectOneButton>
				        
					</h:form>

			    </p:layoutUnit>
			 
			    <p:layoutUnit id="center" position="center">
			    
			    	<h:form>
			    	
			    	<p:fieldset legend="#{msgs['addPost']}" toggleable="true" toggleSpeed="500">
				        <p:ajax event="toggle"/>
				        
				        <p:inputTextarea id="newPostText" required="true" rows="2" cols="100" counter="display" maxlength="255" counterTemplate="{0} characters remaining." autoResize="false" />
				 		<h:outputText id="display" />
				 		<p:message for="newPostText" display="tooltip"/>
				 		
				    	<p:commandButton value="#{msgs['publish']}" actionListener="#{postManagerBean.createPost()}"/>
				    </p:fieldset>
    
					<p:panel class="talk">
	       				<p:toolbar>
					        <f:facet name="left">
					        	<span>1h ago</span>
					        	<span class="modOnly">Author: Test</span>
					        </f:facet>
					        <f:facet name="right">
						        <p:commandButton type="button" value="Report" icon="ui-icon-alert" />
						        <p:commandButton type="button" value="Delete" icon="ui-icon-trash" />
					        </f:facet>
					    </p:toolbar>
					    
					    
					    
   					</p:panel>
				    	
			 		</h:form>
			    </p:layoutUnit>
			</p:layout>

		
		</ui:define>
	</ui:composition>
</html>